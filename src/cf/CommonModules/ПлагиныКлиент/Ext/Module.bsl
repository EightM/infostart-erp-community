Процедура Открыть(Ссылка, Параметры=Неопределено, Владелец=Неопределено) Экспорт
	ТипПлагина=ОбщегоНазначенияСервер.ЗначениеРеквизитаОбъекта(Ссылка, "ТипПлагина");
	
	Если ТипПлагина=2 Тогда //Алгоритм
		СтруктураПараметров=ПлагиныСервер.ПараметрыАлгоритма(Ссылка);
		Алгоритм=ОбщегоНазначенияСервер.ЗначениеРеквизитаОбъекта(Ссылка, "Алгоритм");
		Выполнить(Алгоритм); Возврат;
	КонецЕсли;

	Если ТипПлагина=0 Тогда
		ИмяОбработки=СокрЛП(ОбщегоНазначенияСервер.ЗначениеРеквизитаОбъекта(Ссылка, "Алгоритм"));
		стрПуть="Обработка."+ИмяОбработки+"."+ПлагиныСервер.ИмяОсновнойФормы(ИмяОбработки);

	ИначеЕсли ТипПлагина=1 Тогда
		стрФайл=ПлагиныСервер.ПолныйПуть(Ссылка);
		Если ПустаяСтрока(стрФайл) Тогда Возврат; КонецЕсли;
		Если Не ФайлСуществует(стрФайл) Тогда Возврат; КонецЕсли;
		АдресХранилища=""; ПоместитьФайл(АдресХранилища, стрФайл,,Ложь);

		стрПуть=ПлагиныСервер.Подключить(Ссылка, АдресХранилища, стрФайл);
		Если ПустаяСтрока(стрПуть) Тогда Возврат; КонецЕсли; 
	КонецЕсли;

	РежимОткрытия=ОбщегоНазначенияСервер.ЗначениеРеквизитаОбъекта(Ссылка, "РежимОткрытияФормы");
	Если РежимОткрытия=1 Тогда
		РежимОткрытия=РежимОткрытияОкнаФормы.БлокироватьОкноВладельца;
	ИначеЕсли РежимОткрытия=2 Тогда
		РежимОткрытия=РежимОткрытияОкнаФормы.БлокироватьВесьИнтерфейс;
	Иначе
		РежимОткрытия=РежимОткрытияОкнаФормы.Независимый;
	КонецЕсли; 

	ОткрытьФорму(стрПуть, Параметры, Владелец, Новый УникальныйИдентификатор,,,,РежимОткрытия);
КонецПроцедуры

Функция ФайлСуществует(ИмяФайла)
	ФайлНаДиске=Новый Файл(ИмяФайла);
	Если ФайлНаДиске.Существует() Тогда Возврат Истина; КонецЕсли;
	ОбщегоНазначенияКлиентСервер.СообщитьПользователю("Файл {"+ИмяФайла+"} не найден!");
	Возврат Ложь;
КонецФункции